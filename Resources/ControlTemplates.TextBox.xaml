<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!-- Extracted reusable TextBox control template -->
    <ControlTemplate x:Key="ThemedTextBoxTemplate" TargetType="TextBox">
        <Grid>
            <!-- Outer border with subtle bevel -->
            <Border x:Name="Bd"
                    Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    CornerRadius="6">
                <Grid>
                    <!-- content host -->
                    <ScrollViewer x:Name="PART_ContentHost" Margin="4,2,4,2" />

                    <!-- inner sheen to give a soft 3D feel -->
                    <Rectangle IsHitTestVisible="False" RadiusX="6" RadiusY="6">
                        <Rectangle.Fill>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                <GradientStop Color="#60FFFFFF" Offset="0.0" />
                                <GradientStop Color="#00FFFFFF" Offset="0.5" />
                            </LinearGradientBrush>
                        </Rectangle.Fill>
                    </Rectangle>
                </Grid>
            </Border>

            <!-- Focus glow: gold halo using DropShadowEffect on a transparent border -->
            <Border x:Name="FocusGlow" CornerRadius="6" Background="Transparent" Opacity="0">
                <Border.Effect>
                    <DropShadowEffect Color="#FFD16A" BlurRadius="14" ShadowDepth="0" Opacity="0.9" />
                </Border.Effect>
            </Border>
        </Grid>
        <ControlTemplate.Triggers>
            <Trigger Property="IsKeyboardFocused" Value="True">
                <Setter TargetName="FocusGlow" Property="Opacity" Value="1" />
            </Trigger>
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Opacity" Value="0.6" />
            </Trigger>
            <!-- Basic validation state -->
            <Trigger Property="Validation.HasError" Value="True">
                <Setter TargetName="Bd" Property="BorderBrush" Value="#D32F2F" />
                <Setter Property="ToolTip"
                        Value="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors)[0].ErrorContent}" />
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>

</ResourceDictionary>
